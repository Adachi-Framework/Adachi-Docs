# 使用 npm 依赖

框架通过 `pnpm` 提供了 [WorkSpace](https://pnpm.io/zh/workspaces) 支持，这将允许开发者在自己的插件目录下安装依赖，无需修改主项目依赖。
且当主框架安装依赖时，插件依赖也将被一并安装。

## 安装依赖

初始化插件目录为 npm 仓库：

```bash
pnpm init -y
```

安装开发与生产依赖（以 `lodash` 为例）

```bash
# 生产依赖
pnpm add lodash
# 开发依赖
pnpm add -D @types/lodash
```

## 注意事项

框架运行时采用的是不对 TypeScript 进行校验的模式，因此您大可以讲 `@types` 类型依赖安装为**开发依赖**。

请不要混淆**生产依赖**与**开发依赖**，您需要保证开发依赖中没有插件运行所必需的内容，否则可能会导致插件无法正常运行。

例如在主框架的“更新插件(`upgrade_plugins`)”指令中，插件更新完毕后会使用 `pnpm install -P` 来仅安装生产依赖，届时开发依赖将不会被安装。此时若您的插件的开发依赖中存在运行所必需的内容，将会导致插件无法正常运行。

